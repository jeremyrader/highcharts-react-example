<html>

    <head>
        <script src="http://code.jquery.com/jquery-3.1.1.min.js"></script>
        <script src="http://code.highcharts.com/highcharts.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-beta.9/js/uikit.min.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-beta.8/css/uikit.min.css" />
    
    </head>
    
    <body>

        <div uk-grid class="uk-flex uk-flex-column">

            <div id="container" class="uk-card uk-card-default uk-card-body uk-align-center uk-margin-top"></div>
            <div class="uk-form uk-card uk-card-default uk-card-body uk-align-center">

                <div>
                    <label class="uk-first-column">
                        <input class="uk-radio" type="radio" name="heat-unit" checked>Kelvin
                    </label>

                    <label>
                        <input class="uk-radio" type="radio" name="heat-unit">Fahrenheit
                    </label>

                    <label>
                        <input class="uk-radio" type="radio" name="heat-unit">Celsius
                    </label>

                </div>

                <div>

                    <label class="uk-first-column">
                        <input class="uk-radio" type="radio" name="forecast" checked>Temperature
                    </label>

                    <label>
                        <input class="uk-radio" type="radio" name="forecast">Humidity
                    </label>

                    <label>
                        <input class="uk-radio" type="radio" name="forecast">Wind speed
                    </label>

                </div>

            </div>

        </div>



        <script> 

            $.ajax({
                url: '/cityForecasts',
                success: function(data) {
                    localStorage.setItem('cityForecasts', JSON.stringify(data.cityForecasts));
                }
            });

            $(function () { 

                let cityForecasts = JSON.parse(localStorage.getItem('cityForecasts'));

                let series = [];

                for (cityForecast of cityForecasts) {

                    series.push({
                        name: cityForecast.city + ',' + cityForecast.country,
                        data: cityForecast.temperature
                    });

                }

                var myChart = Highcharts.chart('container', {
                    chart: {
                        type: 'line'
                    },
                    title: {
                        text: 'Weather forecast for major cities'
                    },
                    xAxis: {
                        type: 'datetime',
                        tickInterval: 24 * 3600 * 1000,
                    },
                    yAxis: {
                        title: {
                            text: 'Degrees Kelvin'
                        },
                        labels: {
                            formatter: function() {
                                return this.value + 'Â° K';   
                            }
                        }
                    },
                    series: series
                });
                
            });
        
        </script>
    
    </body>

</html>